#######################科研建筑#########################
GF_nyto_research_building_tir1 ={

}
#################产能建筑###################


###########社会建筑#############


##################组装建筑############

GF_nyto_assembly_plant ={
    base_buildtime = @b1_time
    planet_limit = 1
    category = pop_assembly

    building_sets = {
        government
        urban
    }
    potential = {
        exists = owner
        owner = {
            is_nyto_country = yes
        }
        NOR = {
            has_modifier = gestation_colony
            has_modifier = resort_colony
        }
    }
    convert_to = {
        building_robot_assembly_plant
    }
    allow = {
        hidden_trigger = {
            OR = {
                owner = { is_ai = no }
                NAND = {
                    free_district_slots = 0
                    free_building_slots <= 1
                    free_housing <= 0
                    free_jobs <= 0
                }
            }
        }
    }
    destroy_trigger = {
        exists = owner
        owner ={
            is_nyto_country = no
        }
    }

    inline_script = {
        script = jobs/roboticist_add
        AMOUNT = @building_static_jobs_low
    }

    resources = {
        category = planet_buildings
        cost = {
            minerals = @b1_minerals
        }
        upkeep = {
            energy = @b1_upkeep
        }
    }

    upgrades = {
        building_machine_assembly_complex
    }

    prerequisites = {

    }
}





#############
# Machine buildings
#############

building_machine_assembly_plant = {
    icon = building_robot_assembly_plant
    base_buildtime = @b1_time
    planet_limit = 1

    category = pop_assembly

    building_sets = {
        government
        urban
    }

    potential = {
        exists = owner
        owner = {
            OR = {
                is_machine_empire = yes
                is_individual_machine = yes
            }
        }
        NOR = {
            has_modifier = gestation_colony
            has_modifier = resort_colony
        }
    }

    convert_to = {
        building_robot_assembly_plant
        GF_nyto_assembly_plant
    }

    allow = {
        hidden_trigger = {
            OR = {
                owner = { is_ai = no }
                NAND = {
                    free_district_slots = 0
                    free_building_slots <= 1
                    free_housing <= 0
                    free_jobs <= 0
                }
            }
        }
    }

    destroy_trigger = {
        exists = owner
        OR = {
            owner = {
                is_robot_empire = no
            }
            AND = {
                owner = { is_ai = yes }
                free_district_slots = 0
                free_building_slots = 0
                free_housing <= 0
                free_jobs <= 0
            }
        }
    }

    inline_script = {
        script = jobs/roboticist_add
        AMOUNT = @building_static_jobs_low
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                OR = {
                    is_machine_empire = yes
                    is_individual_machine = yes
                }
            }
            any_owned_pop_group = {
                has_auto_modding_trait = yes
            }
        }
        modifier = {
            auto_mod_monthly_add = 200
        }
    }

    resources = {
        category = planet_buildings
        cost = {
            minerals = @b1_minerals
        }
        upkeep = {
            energy = @b1_upkeep
        }
    }

    upgrades = {
        building_machine_assembly_complex
    }

    prerequisites = {

    }

}

building_machine_assembly_complex = {
    base_buildtime = @b3_time
    can_build = no

    category = pop_assembly

    building_sets = {
        government
        urban
    }

    potential = {
        exists = owner
        owner = {
            OR = {
                is_machine_empire = yes
                is_individual_machine = yes
            }
        }
        NOR = {
            has_modifier = gestation_colony
            has_modifier = resort_colony
        }
    }

    convert_to = {
        building_robot_assembly_complex
    }

    destroy_trigger = {
        exists = owner
        OR = {
            owner = {
                is_robot_empire = no
            }
            AND = {
                owner = { is_ai = yes }
                free_district_slots = 0
                free_building_slots = 0
                free_housing <= 0
                free_jobs <= 0
            }
        }
    }

    inline_script = {
        script = jobs/roboticist_add
        AMOUNT = @building_static_jobs
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                OR = {
                    is_machine_empire = yes
                    is_individual_machine = yes
                }
            }
            any_owned_pop_group = {
                has_auto_modding_trait = yes
            }
        }
        modifier = {
            auto_mod_monthly_add = 400
        }
    }

    resources = {
        category = planet_buildings
        cost = {
            minerals = @b3_minerals
            rare_crystals = @b3_rare_cost
        }
        upkeep = {
            energy = @b3_upkeep
            rare_crystals = @b3_rare_upkeep
        }
    }

    prerequisites = {
        tech_mega_assembly
    }
}
